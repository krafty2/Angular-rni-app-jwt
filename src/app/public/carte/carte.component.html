<app-nav-bar></app-nav-bar>
<section>
    <div class="form-field-container">
        <div class="search-zone" >
            <div class="search-container">
                <mat-form-field style="height: 70px;">
                    <mat-label>Choisit une annee</mat-label>
                    <mat-select (selectionChange)="selectAnnee($event.value)"> 
                        <mat-option>None</mat-option>
                        <mat-option *ngFor="let an of annees" value="{{an}}">{{an}}</mat-option>
                    </mat-select>
                </mat-form-field>
    
                <mat-form-field style="height: 70px;">
                    <mat-label>Choisit une Region</mat-label>
                    <mat-select name="region" (selectionChange)="selectRegion($event.value)">
                        <mat-option>None</mat-option>
                        <mat-option *ngFor="let region of regions" value="{{region}}">{{region}}</mat-option>
                    </mat-select>
                </mat-form-field>
    
                <mat-form-field style="height: 70px;">
                    <mat-label>Choisit une province</mat-label>
                    <mat-select (selectionChange)="selectProvince($event.value)">
                        <mat-option>None</mat-option>
                        <mat-option *ngFor="let province of provinces" value="{{province}}">{{province}}</mat-option>
                    </mat-select>
                </mat-form-field>
    
                <mat-form-field style="height: 70px;">
                    <mat-label>Choisit une Localite</mat-label>
                    <mat-select (selectionChange)="selectLocalite($event.value)">
                        <mat-option>None</mat-option>
                        <mat-option *ngFor="let localite of localites" value="{{localite}}">{{localite}}</mat-option>
                    </mat-select>
                </mat-form-field>
    
                <button class="btn search-btn mat-elevation-z2" type="submit" (click)="searchTerm()">Rechercher</button>
            </div>
        </div>
    </div>

    <ng-template #loading>
        <div style="display: flex;align-items: center;
         justify-content: center; width: 100%;
          height: 100vh;font-size: 16px;">Loading...</div>
    </ng-template>
    <div *ngIf="siteMesure else loading">
        
    </div>
    <section class="carte-browser">
        <div class=" bordure-div " id="map">

        </div>
    </section>
    <!-------------------se trouve au niveau de la map mais sera supprime avec le----------------->
    <ng-template #searchForm>
        <section>
            <input type="checkbox" id="check-search">
            <label for="check-search" class="check-btn-search z-depth-5"> <i class="Tiny material-icons"
                    style="color: black;background: white;">search</i></label>
            <form class="formulaireDisplay" id="leaflet-form" #search="ngForm" (ngSubmit)="zoneDeRecherche()">
                <div class="white z-depth-3">
                    <h5 class="center" id="zoneTitre">Criteres de Recherches</h5>
                    <div class="row">
                        <div class="col s6">
                            <div class="input-field">
                                <input type="text" id="region" name="region" [(ngModel)]="region" required>
                                <label for="region">Region</label><br>
                            </div>
                        </div>
                        <div class="col s6">
                            <div class="input-field">
                                <input type="text" id="province" name="province" [(ngModel)]="province">
                                <label for="province">Province</label><br>
                            </div>
                        </div>
                    </div>

                    <div class="row">
                        <div class="col s6">
                            <div class="input-field">
                                <input type="text" id="localite" name="localite" [(ngModel)]="localite">
                                <label for="localite">Localite</label><br>
                            </div>
                        </div>
                        <div class="col s6">
                            <div class="input-field">
                                <input type="number" id="annee" name="annee" [(ngModel)]="annee">
                                <label for="annee">Annee</label><br>
                            </div>
                        </div>
                    </div>

                    <!-- [disabled]="!rechercheForm.valid" -->
                    <button class="btn red darken-1 z-depth-1" style="width: 100%;height: 35px;"
                        type="submit">recherche</button>
                </div>
            </form>
        </section>

    </ng-template>

    <ng-template #popupTemplate>
        <div>
            <div>
                <span class="black-text">

                    <button id="popup-button" (click)="telechargeRapport()"
                        class=" btn waves-effect waves-light">Telecharger</button>
                </span>
            </div>
        </div>
    </ng-template>

</section>